!function(a){var e={};function r(t){if(e[t])return e[t].exports;var l=e[t]={i:t,l:!1,exports:{}};return a[t].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=a,r.c=e,r.d=function(a,e,t){r.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},r.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,e){if(1&e&&(a=r(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var l in a)r.d(t,l,function(e){return a[e]}.bind(null,l));return t},r.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(e,"a",e),e},r.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},r.p="",r(r.s=189)}({189:function(a,e,r){"use strict";r.r(e);r(190);function t(a){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(a).replace(/[&<>"'`=\/]/g,(function(a){return e[a]}))}function l(a){var e=parseInt(jQuery("#"+a+"totImg").val()),r=(parseInt(jQuery("#"+a+"image_limit").val()),jQuery),i=r("#"+a+"plupload-thumbs");i.html("");var o=r("#"+a,r("#"+a+"plupload-upload-ui").parent()).val();if(void 0!==atbdp_params.action_remove&&""!=atbdp_params.action_remove&&atbdp_params.action_remove,o){for(var p=o.split("::"),d=0;d<p.length;d++)if(p[d]&&"null"!=p[d]){var s=p[d].split("|"),u=s[0],n=s[1],f=s[2],m=s[3],c="",_="";void 0===n&&(n=""),void 0===f&&(f=""),void 0===m&&(m=""),f=t(f),m=t(m);var v=u.substring(u.lastIndexOf(".")+1);(v=v.split("?").shift())&&(v=v.toLowerCase());var b=u.lastIndexOf("/")+1,y=u.lastIndexOf(".");if(y<b)continue;var h=u.substr(b,y<b?loc.length:y),g="",j="";if("jpg"==v||"jpe"==v||"jpeg"==v||"png"==v||"gif"==v||"bmp"==v||"ico"==v)g='<img class="atbdp-file-info" data-id="'+n+'" data-title="'+f+'" data-caption="'+m+'" data-src="'+u+'" src="'+u+'" alt=""  />',f.trim()&&(c='<span class="atbdp-title-preview">'+f+"</span>"),m.trim()&&(_='<span class="atbdp-caption-preview">'+m+"</span>");else{var Q="la-file";"pdf"==v?Q="la-file-pdf-o":"zip"==v||"tar"==v?Q="la-file-zip-o":"doc"==v||"odt"==v?Q="la-file-word-0":"txt"==v||"text"==v?Q="la-file-text-0":"csv"==v||"ods"==v||"ots"==v?Q="la-file-excel-0":"avi"!=v&&"mp4"!=v&&"mov"!=v||(Q="la-file-video-0"),j="file-thumb",g='<i title="'+h+'" class="la '+Q+' atbdp-file-info" data-id="'+n+'" data-title="'+f+'" data-caption="'+m+'" data-src="'+u+'" aria-hidden="true"></i>'}var x=r('<div class="thumb '+j+'" id="thumb'+a+d+'">'+c+g+_+'<div class="atbdp-thumb-actions"><span class="thumbremovelink" id="thumbremovelink'+a+d+'"><i class="fa fa-trash" aria-hidden="true"></i></span></div></div>');i.append(x),x.find(".thumbremovelink").click((function(){jQuery("#"+a+"plupload-upload-ui").hasClass("plupload-upload-uic-multiple")&&(e--,jQuery("#"+a+"totImg").val(e)),jQuery("#"+a+"upload-error").html(""),jQuery("#"+a+"upload-error").removeClass("upload-error");var t=r(this).attr("id").replace("thumbremovelink"+a,"");t=parseInt(t);var i=[];o=r("#"+a,r("#"+a+"plupload-upload-ui").parent()).val(),p=o.split("::");for(var d=0;d<p.length;d++)d!=t&&(i[i.length]=p[d]);return r("#"+a,r("#"+a+"plupload-upload-ui").parent()).val(i.join("::")),l(a),!1}))}p.length>1&&(i.sortable({update:function(e,t){var o=[];i.find(".atbdp-file-info").each((function(){o[o.length]=r(this).data("src")+"|"+r(this).data("id")+"|"+r(this).data("title")+"|"+r(this).data("caption"),r("#"+a,r("#"+a+"plupload-upload-ui").parent()).val(o.join("::")),l(a)}))}}),i.disableSelection());var I=[];i.find(".atbdp-file-info").each((function(){I[I.length]=r(this).data("src")+"|"+r(this).data("id")+"|"+r(this).data("title")+"|"+r(this).data("caption"),r("#"+a,r("#"+a+"plupload-upload-ui").parent()).val(I.join("::"))}))}}jQuery.fn.exists=function(){return jQuery(this).length>0},jQuery(document).ready((function(a){if(a(".plupload-upload-uic").exists()){var e=!1,r="",t="";if(jQuery("#atbdpectory-add-post input[name='ID']").length)t=jQuery("#atbdpectory-add-post input[name='ID']").val();else t=jQuery("#post input[name='post_ID']").val();a(".plupload-upload-uic").each((function(i,o){var p=a(this),d=p.attr("id").replace("plupload-upload-ui","");l(d),(e=JSON.parse(atbdp_plupload_params.base_plupload_config)).browse_button=d+e.browse_button,e.container=d+e.container,jQuery("#"+d+"dropbox").length&&(e.drop_element=d+"dropbox"),e.file_data_name=d+e.file_data_name,e.multipart_params.imgid=d,e.multipart_params.post_id=t,e.max_file_size=a("#"+d+"_file_size").val(),p.hasClass("plupload-upload-uic-multiple")&&(e.multi_selection=!0);var s=jQuery("#"+d+"_allowed_types").val();if(s=s&&""!=s?s:"","post_images"==d&&void 0!==atbdp_params.atbdp_allowed_img_types&&""!=atbdp_params.atbdp_allowed_img_types&&(s=atbdp_params.atbdp_allowed_img_types),s&&""!=s){var u=void 0!==atbdp_params.txt_all_files&&""!=atbdp_params.txt_all_files?atbdp_params.txt_all_files:"Allowed files";e.filters=[{title:u,extensions:s}]}var n,f=new plupload.Uploader(e);f.bind("Init",(function(a){})),f.bind("Init",(function(a,e){if(f.features.dragdrop){var r=jQuery("#"+(d+"dropbox"));r.on("dragenter",(function(a){r.addClass("dragover")})),r.on("dragleave",(function(a){r.removeClass("dragover")})),r.on("drop",(function(){r.removeClass("dragover")}))}})),f.init(),f.bind("Error",(function(e,t){if(-600==t.code)jQuery("#"+d+"upload-error").addClass("upload-error"),r=(r=void 0!==atbdp_params.err_max_file_size&&""!=atbdp_params.err_max_file_size?atbdp_params.err_max_file_size:"File size error : You tried to upload a file over %s").replace("%s",a("#"+d+"_file_size").val()),jQuery("#"+d+"upload-error").html(r);else if(-601==t.code){if(jQuery("#"+d+"upload-error").addClass("upload-error"),r=void 0!==atbdp_params.err_file_type&&""!=atbdp_params.err_file_type?atbdp_params.err_file_type:"File type error. Allowed file types: %s","post_images"==d){var l=""!=s?"."+s.replace(/,/g,", ."):"*";r=r.replace("%s",l)}else r=r.replace("%s",jQuery("#"+d+"_allowed_types").attr("data-exts"));jQuery("#"+d+"upload-error").html(r)}else jQuery("#"+d+"upload-error").addClass("upload-error"),jQuery("#"+d+"upload-error").html(t.message)})),f.bind("FilesAdded",(function(e,t){var l=parseInt(jQuery("#"+d+"totImg").val()),i=parseInt(jQuery("#"+d+"image_limit").val());if(jQuery("#"+d+"upload-error").html(""),jQuery("#"+d+"upload-error").removeClass("upload-error"),i&&p.hasClass("plupload-upload-uic-multiple")&&i>0){if(l>=i&&i>0){for(;e.files.length>0;)e.removeFile(e.files[0]);return r=(r=void 0!==atbdp_params.err_file_upload_limit&&""!=atbdp_params.err_file_upload_limit?atbdp_params.err_file_upload_limit:"You have reached your upload limit of %s files.").replace("%s",i),jQuery("#"+d+"upload-error").addClass("upload-error"),jQuery("#"+d+"upload-error").html(r),!1}if(e.files.length>i&&i>0){for(;e.files.length>0;)e.removeFile(e.files[0]);return r=(r=void 0!==atbdp_params.err_pkg_upload_limit&&""!=atbdp_params.err_pkg_upload_limit?atbdp_params.err_pkg_upload_limit:"You may only upload %s files with this package, please try again.").replace("%s",i),jQuery("#"+d+"upload-error").addClass("upload-error"),jQuery("#"+d+"upload-error").html(r),!1}}a.each(t,(function(a,e){p.find(".filelist").append('<div class="file" id="'+e.id+'"><b>'+e.name+"</b> (<span>"+plupload.formatSize(0)+"</span>/"+plupload.formatSize(e.size)+') <div class="fileprogress"></div></div>')})),e.refresh(),e.start()})),f.bind("UploadProgress",(function(e,r){a("#"+r.id+" .fileprogress").width(r.percent+"%"),a("#"+r.id+" span").html(plupload.formatSize(parseInt(r.size*r.percent/100)))}));var m=0,c=new Array;f.bind("FileUploaded",(function(e,r,t){var i=parseInt(jQuery("#"+d+"totImg").val());if(c[m]=e,clearInterval(n),n=setTimeout((function(){}),1e3),m++,a("#"+r.id).fadeOut(),t=t.response,p.hasClass("plupload-upload-uic-multiple")){i++,jQuery("#"+d+"totImg").val(i);var o=a.trim(a("#"+d,a("#"+d+"plupload-upload-ui").parent()).val());o=o?o+"::"+t:t,a("#"+d,a("#"+d+"plupload-upload-ui").parent()).val(o)}else a("#"+d,a("#"+d+"plupload-upload-ui").parent()).val(t+"");l(d)}))}))}}))},190:function(a,e,r){}});
//# sourceMappingURL=directorist-plupload.min.js.map